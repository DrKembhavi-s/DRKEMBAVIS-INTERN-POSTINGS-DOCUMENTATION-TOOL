<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jain AGM Ayurvedic Medical College & Hospital - Intern Postings Documentation Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            text-align: center;
            padding: 30px 20px;
        }

        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-content {
            padding: 30px;
        }

        .section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #3498db;
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }

        .section h2::before {
            content: "â–¶";
            margin-right: 10px;
            color: #3498db;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
            font-size: 0.95rem;
        }

        input, select, textarea {
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #219a52);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .view-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .view-toggle button {
            padding: 10px 20px;
            border: 2px solid #3498db;
            background: white;
            color: #3498db;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .view-toggle button.active {
            background: #3498db;
            color: white;
        }

        .login-section {
            background: #e8f5e8;
            border: 2px solid #27ae60;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .admin-login-section {
            background: #e8f8ff;
            border: 2px solid #3498db;
        }

        .hod-login-section {
            background: #e8f5e8;
            border: 2px solid #27ae60;
        }

        .login-form {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 15px;
            align-items: end;
        }

        .panel {
            background: #f0f8ff;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .panel-welcome {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .intern-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .intern-card {
            background: white;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .intern-card:hover {
            border-color: #3498db;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .intern-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }

        .intern-name {
            font-weight: 700;
            color: #2c3e50;
            font-size: 1.1rem;
        }

        .intern-reg {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .progress-bar {
            background: #ecf0f1;
            border-radius: 20px;
            height: 20px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            border-radius: 20px;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-completed {
            background: #d5f4e6;
            color: #27ae60;
        }

        .status-pending {
            background: #fef9e7;
            color: #f39c12;
        }

        .verification-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 10px;
        }

        .verified {
            background: #d5f4e6;
            color: #27ae60;
        }

        .not-verified {
            background: #fef9e7;
            color: #f39c12;
        }

        .posting-item {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 10px;
            margin: 8px 0;
            border-left: 3px solid #3498db;
        }

        .posting-dept {
            font-weight: 600;
            color: #2c3e50;
        }

        .posting-dates {
            font-size: 0.85rem;
            color: #7f8c8d;
            margin-top: 3px;
        }

        .posting-days {
            font-size: 0.85rem;
            color: #27ae60;
            font-weight: 600;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .action-buttons .btn {
            padding: 8px 15px;
            font-size: 0.8rem;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #3498db;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #2c3e50;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .close:hover {
            color: #000;
        }

        .export-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 30px;
        }

        .letter-list-item {
            border: 1px solid #e1e8ed;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        @media (max-width: 768px) {
            .form-grid, .login-form {
                grid-template-columns: 1fr;
            }
            
            .intern-list {
                grid-template-columns: 1fr;
            }
            
            .export-buttons, .action-buttons {
                flex-direction: column;
                align-items: center;
            }
        }

        @media print {
            body { background: white; }
            .container { box-shadow: none; }
            .btn { display: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>JAIN AGM AYURVEDIC MEDICAL COLLEGE & HOSPITAL, VARUR</h1>
            <p>INTERN POSTINGS DOCUMENTATION TOOL</p>
        </div>

        <div class="main-content">
            <!-- View Toggle -->
            <div class="view-toggle">
                <button id="adminViewBtn" class="active" onclick="switchView('admin')">Admin Login</button>
                <button id="hodViewBtn" onclick="switchView('hod')">HOD Login</button>
            </div>

            <!-- Admin Login Section -->
            <div id="adminLoginSection" class="login-section admin-login-section">
                <h3 style="color: #3498db; margin-bottom: 15px;">Admin Login</h3>
                <div class="login-form">
                    <div class="form-group">
                        <label for="adminUsername">Username</label>
                        <input type="text" id="adminUsername" placeholder="e.g., admin">
                    </div>
                    <div class="form-group">
                        <label for="adminPassword">Password</label>
                        <input type="password" id="adminPassword" placeholder="Enter password">
                    </div>
                    <button class="btn btn-primary" onclick="adminLogin()">Login</button>
                </div>
                <div id="adminLoginError" style="color: #e74c3c; margin-top: 10px; display: none;"></div>
            </div>

            <!-- HOD Login Section -->
            <div id="hodLoginSection" class="login-section hod-login-section" style="display: none;">
                <h3 style="color: #27ae60; margin-bottom: 15px;">HOD Login</h3>
                <div class="login-form">
                    <div class="form-group">
                        <label for="hodUsername">Username</label>
                        <input type="text" id="hodUsername" placeholder="e.g., hodkc">
                    </div>
                    <div class="form-group">
                        <label for="hodPassword">Password</label>
                        <input type="password" id="hodPassword" placeholder="e.g., kc2025">
                    </div>
                    <button class="btn btn-success" onclick="hodLogin()">Login</button>
                </div>
                <div id="hodLoginError" style="color: #e74c3c; margin-top: 10px; display: none;"></div>
            </div>

            <!-- Admin Panel -->
            <div id="adminPanel" class="panel" style="display: none;">
                <div class="panel-welcome">
                    Welcome, <span id="adminRoleName"></span>
                    <button class="btn btn-danger" onclick="adminLogout()" style="float: right; padding: 5px 15px; font-size: 0.8rem;">Logout</button>
                </div>
            </div>

            <!-- HOD Panel -->
            <div id="hodPanel" class="panel" style="display: none; background: #f0f8f0; border-color: #27ae60;">
                <div class="panel-welcome">
                    Welcome, <span id="hodDeptName"></span> HOD
                    <button class="btn btn-danger" onclick="hodLogout()" style="float: right; padding: 5px 15px; font-size: 0.8rem;">Logout</button>
                </div>
                <div id="hodPostings"></div>
            </div>

            <!-- Admin Sections -->
            <div id="adminSections" style="display: none;">
                <!-- Posting Letters Generation Section -->
                <div class="section">
                    <h2>Generate Posting Letters</h2>
                    <p style="color: #7f8c8d; margin-bottom: 20px;">Generate official posting letters from Medical Superintendent to HODs for upcoming intern postings.</p>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="letterInternName">Intern Name *</label>
                            <input type="text" id="letterInternName" required>
                        </div>
                        <div class="form-group">
                            <label for="letterInternRegNo">Registration Number *</label>
                            <input type="text" id="letterInternRegNo" required>
                        </div>
                        <div class="form-group">
                            <label for="letterDept">Department *</label>
                            <select id="letterDept" required>
                                <option value="">Select Department</option>
                                <option value="KAYACHIKITSA">KAYACHIKITSA (KC)</option>
                                <option value="SHALYA TANTRA">SHALYA TANTRA (ST)</option>
                                <option value="SHALAKYA TANTRA">SHALAKYA TANTRA (SKT)</option>
                                <option value="PANCHAKARMA">PANCHAKARMA (PK)</option>
                                <option value="PRASUTI TANTRA & STREE ROGA">PRASUTI TANTRA & STREE ROGA (PTSR)</option>
                                <option value="KAUMARABHRITYA">KAUMARABHRITYA (KB)</option>
                                <option value="SWASTHAVRITTA">SWASTHAVRITTA (SV)</option>
                                <option value="LABORATORY">LABORATORY (LAB)</option>
                                <option value="PHARMACY">PHARMACY (PHM)</option>
                                <option value="ATYAYIKA">ATYAYIKA (ATY)</option>
                                <option value="AYUSH">AYUSH (AYU)</option>
                                <option value="SCREENING">SCREENING (SCR)</option>
                                <option value="OTHER HOSPITALS">OTHER HOSPITALS (OTH)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="letterFromDate">From Date *</label>
                            <input type="date" id="letterFromDate" required>
                        </div>
                        <div class="form-group">
                            <label for="letterToDate">To Date *</label>
                            <input type="date" id="letterToDate" required>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="generateSingleLetter()">Generate Single Letter</button>
                        <button class="btn btn-success" onclick="addToLetterList()">Add to Letter List</button>
                        <button class="btn btn-secondary" onclick="clearLetterForm()">Clear Form</button>
                    </div>

                    <div id="letterListSection" style="display: none; margin-top: 30px;">
                        <h3 style="color: #2c3e50; margin-bottom: 15px;">Batch Letter Generation</h3>
                        <div id="letterList" style="background: white; border-radius: 8px; padding: 15px; max-height: 300px; overflow-y: auto;"></div>
                        <div style="display: flex; gap: 15px; margin-top: 15px; flex-wrap: wrap;">
                            <button class="btn btn-success" onclick="generateBatchLetters()">Generate Individual Letters for All</button>
                            <button class="btn btn-primary" onclick="generateDepartmentBatchLetters()">Generate Batch Letters by Department</button>
                            <button class="btn btn-danger" onclick="clearLetterList()">Clear All</button>
                        </div>
                    </div>
                </div>

                <!-- Add New Intern Section -->
                <div class="section">
                    <h2>Add New Intern</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="internName">Intern Name *</label>
                            <input type="text" id="internName" required>
                        </div>
                        <div class="form-group">
                            <label for="internRegNo">Registration Number *</label>
                            <input type="text" id="internRegNo" required>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="addIntern()">Add Intern</button>
                </div>

                <!-- Summary Statistics -->
                <div class="section">
                    <h2>Summary Statistics</h2>
                    <div class="summary-stats">
                        <div class="stat-card">
                            <div class="stat-number" id="totalInterns">0</div>
                            <div class="stat-label">Total Interns</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="completedInterns">0</div>
                            <div class="stat-label">Completed (365 days)</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="pendingInterns">0</div>
                            <div class="stat-label">Pending</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="avgProgress">0%</div>
                            <div class="stat-label">Average Progress</div>
                        </div>
                    </div>
                </div>

                <!-- Manage Interns -->
                <div class="section">
                    <h2>Manage Interns</h2>
                    <div style="margin-bottom: 20px;">
                        <input type="text" id="searchIntern" placeholder="Search by name or registration number..." 
                               oninput="filterInterns()" style="width: 100%; max-width: 400px;">
                    </div>
                    
                    <div class="export-buttons">
                        <button class="btn btn-success" onclick="exportAllData()">Export All Data (JSON)</button>
                        <button class="btn btn-secondary" onclick="importData()">Import Data (JSON)</button>
                        <input type="file" id="importFile" accept=".json" style="display: none;" onchange="handleImport(event)">
                        <button class="btn btn-primary" onclick="generateMasterReport()">Generate Master Report</button>
                    </div>

                    <div class="intern-list" id="internList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Posting Modal -->
    <div id="addPostingModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Add Department Posting</h2>
            <div id="modalInternInfo" style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;"></div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="postingDept">Department *</label>
                    <select id="postingDept" required>
                        <option value="">Select Department</option>
                        <option value="KAYACHIKITSA">KAYACHIKITSA (KC)</option>
                        <option value="SHALYA TANTRA">SHALYA TANTRA (ST)</option>
                        <option value="SHALAKYA TANTRA">SHALAKYA TANTRA (SKT)</option>
                        <option value="PANCHAKARMA">PANCHAKARMA (PK)</option>
                        <option value="PRASUTI TANTRA & STREE ROGA">PRASUTI TANTRA & STREE ROGA (PTSR)</option>
                        <option value="KAUMARABHRITYA">KAUMARABHRITYA (KB)</option>
                        <option value="SWASTHAVRITTA">SWASTHAVRITTA (SV)</option>
                        <option value="LABORATORY">LABORATORY (LAB)</option>
                        <option value="PHARMACY">PHARMACY (PHM)</option>
                        <option value="ATYAYIKA">ATYAYIKA (ATY)</option>
                        <option value="AYUSH">AYUSH (AYU)</option>
                        <option value="SCREENING">SCREENING (SCR)</option>
                        <option value="OTHER HOSPITALS">OTHER HOSPITALS (OTH)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="postingFromDate">From Date *</label>
                    <input type="date" id="postingFromDate" required>
                </div>
                <div class="form-group">
                    <label for="postingToDate">To Date *</label>
                    <input type="date" id="postingToDate" required>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 25px;">
                <button class="btn btn-primary" onclick="savePosting()">Save Posting</button>
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Assessment Modal -->
    <div id="assessmentModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <span class="close" onclick="closeAssessmentModal()">&times;</span>
            <h2>Comprehensive Performance Assessment</h2>
            <div id="assessmentInternInfo" style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;"></div>
            
            <form id="assessmentForm">
                <!-- Clinical Knowledge & Skills -->
                <div style="background: white; padding: 20px; margin: 15px 0; border-radius: 8px; border: 1px solid #e1e8ed;">
                    <h4 style="color: #2c3e50; margin-bottom: 15px;">1. Clinical Knowledge & Skills</h4>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center;">
                        <label>Theoretical knowledge of the subject</label>
                        <select name="theoreticalKnowledge" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
                        </select>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center; margin-top: 10px;">
                        <label>Practical application of knowledge</label>
                        <select name="practicalApplication" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
                        </select>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center; margin-top: 10px;">
                        <label>Clinical examination skills</label>
                        <select name="clinicalExamination" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
                        </select>
                    </div>
                </div>

                <!-- Professionalism & Ethics -->
                <div style="background: white; padding: 20px; margin: 15px 0; border-radius: 8px; border: 1px solid #e1e8ed;">
                    <h4 style="color: #2c3e50; margin-bottom: 15px;">3. Professionalism & Ethics</h4>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center;">
                        <label>Professional behavior and conduct</label>
                        <select name="professionalism" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
                        </select>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center; margin-top: 10px;">
                        <label>Ethics and confidentiality</label>
                        <select name="ethics" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
                        </select>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center; margin-top: 10px;">
                        <label>Team collaboration</label>
                        <select name="teamwork" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
                        </select>
                    </div>
                </div>

                <!-- Learning Attitude & Initiative -->
                <div style="background: white; padding: 20px; margin: 15px 0; border-radius: 8px; border: 1px solid #e1e8ed;">
                    <h4 style="color: #2c3e50; margin-bottom: 15px;">4. Learning Attitude & Initiative</h4>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center;">
                        <label>Eagerness to learn and improve</label>
                        <select name="learningAttitude" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
                        </select>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center; margin-top: 10px;">
                        <label>Initiative and proactiveness</label>
                        <select name="initiative" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
                        </select>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center; margin-top: 10px;">
                        <label>Response to feedback and guidance</label>
                        <select name="feedbackResponse" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
                        </select>
                    </div>
                </div>

                <!-- Attendance & Punctuality -->
                <div style="background: white; padding: 20px; margin: 15px 0; border-radius: 8px; border: 1px solid #e1e8ed;">
                    <h4 style="color: #2c3e50; margin-bottom: 15px;">5. Attendance & Punctuality</h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Total Working Days</label>
                            <input type="number" name="totalWorkingDays" id="totalWorkingDays" required min="1">
                        </div>
                        <div class="form-group">
                            <label>Days Present</label>
                            <input type="number" name="daysPresent" id="daysPresent" required min="0">
                        </div>
                        <div class="form-group">
                            <label>Days Absent</label>
                            <input type="number" name="daysAbsent" id="daysAbsent" readonly>
                        </div>
                        <div class="form-group">
                            <label>Punctuality Rating</label>
                            <select name="punctuality" required>
                                <option value="">Select Rating</option>
                                <option value="5">Excellent (5)</option>
                                <option value="4">Very Good (4)</option>
                                <option value="3">Good (3)</option>
                                <option value="2">Satisfactory (2)</option>
                                <option value="1">Needs Improvement (1)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Department-Specific Skills -->
                <div style="background: white; padding: 20px; margin: 15px 0; border-radius: 8px; border: 1px solid #e1e8ed;">
                    <h4 style="color: #2c3e50; margin-bottom: 15px;">6. Department-Specific Skills</h4>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center;">
                        <label>Mastery of department-specific procedures</label>
                        <select name="departmentSkills" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
                        </select>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center; margin-top: 10px;">
                        <label>Understanding of department protocols</label>
                        <select name="protocolUnderstanding" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
                        </select>
                    </div>
                </div>

                <!-- Overall Assessment -->
                <div style="background: white; padding: 20px; margin: 15px 0; border-radius: 8px; border: 1px solid #e1e8ed;">
                    <h4 style="color: #2c3e50; margin-bottom: 15px;">7. Overall Assessment</h4>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label>Overall Performance Rating</label>
                        <select name="overallRating" required>
                            <option value="">Select Overall Rating</option>
                            <option value="Outstanding">Outstanding</option>
                            <option value="Excellent">Excellent</option>
                            <option value="Very Good">Very Good</option>
                            <option value="Good">Good</option>
                            <option value="Satisfactory">Satisfactory</option>
                            <option value="Needs Improvement">Needs Improvement</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label>Recommendation</label>
                        <select name="recommendation" required>
                            <option value="">Select Recommendation</option>
                            <option value="Highly Recommended">Highly Recommended for Future Postings</option>
                            <option value="Recommended">Recommended</option>
                            <option value="Conditionally Recommended">Conditionally Recommended</option>
                            <option value="Needs Further Training">Needs Further Training</option>
                        </select>
                    </div>
                </div>

                <!-- Comments Section -->
                <div style="background: white; padding: 20px; margin: 15px 0; border-radius: 8px; border: 1px solid #e1e8ed;">
                    <h4 style="color: #2c3e50; margin-bottom: 15px;">8. Detailed Comments & Feedback</h4>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label>Strengths and Positive Observations</label>
                        <textarea name="strengths" rows="3" style="width: 100%; padding: 10px; border: 1px solid #e1e8ed; border-radius: 5px;" placeholder="Describe the intern's key strengths and positive qualities observed during the posting..."></textarea>
                    </div>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label>Areas for Improvement</label>
                        <textarea name="improvements" rows="3" style="width: 100%; padding: 10px; border: 1px solid #e1e8ed; border-radius: 5px;" placeholder="Specify areas where the intern needs improvement and suggestions for development..."></textarea>
                    </div>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label>Additional Comments</label>
                        <textarea name="additionalComments" rows="4" style="width: 100%; padding: 10px; border: 1px solid #e1e8ed; border-radius: 5px;" placeholder="Any additional observations, recommendations, or comments about the intern's performance..."></textarea>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
                    <button type="submit" class="btn btn-success" style="margin-right: 15px;">Submit Assessment</button>
                    <button type="button" class="btn btn-secondary" onclick="closeAssessmentModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Individual Report Modal -->
    <div id="reportModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeReportModal()">&times;</span>
            <div id="reportContent"></div>
        </div>
    </div>

    <script>
        // Global variables
        let interns = JSON.parse(localStorage.getItem('internData') || '[]');
        let currentInternId = null;
        let currentView = 'admin';
        let currentHOD = null;
        let currentAdmin = null;
        let letterList = [];
        let currentAssessmentInternId = null;
        let currentAssessmentPostingId = null;

        // Admin credentials
        const adminCredentials = {
            'admin': { password: 'admin2025', role: 'Administrator' },
            'medsup': { password: 'ms2025', role: 'Medical Superintendent' },
            'principal': { password: 'prin2025', role: 'Principal' }
        };

        // HOD credentials
        const hodCredentials = {
            'hodkc': { password: 'kc2025', department: 'KAYACHIKITSA', displayName: 'KAYACHIKITSA' },
            'hodst': { password: 'st2025', department: 'SHALYA TANTRA', displayName: 'SHALYA TANTRA' },
            'hodskt': { password: 'skt2025', department: 'SHALAKYA TANTRA', displayName: 'SHALAKYA TANTRA' },
            'hodpk': { password: 'pk2025', department: 'PANCHAKARMA', displayName: 'PANCHAKARMA' },
            'hodptsr': { password: 'ptsr2025', department: 'PRASUTI TANTRA & STREE ROGA', displayName: 'PRASUTI TANTRA & STREE ROGA' },
            'hodkb': { password: 'kb2025', department: 'KAUMARABHRITYA', displayName: 'KAUMARABHRITYA' },
            'hodsv': { password: 'sv2025', department: 'SWASTHAVRITTA', displayName: 'SWASTHAVRITTA' },
            'hodlab': { password: 'lab2025', department: 'LABORATORY', displayName: 'LABORATORY' },
            'hodphm': { password: 'phm2025', department: 'PHARMACY', displayName: 'PHARMACY' },
            'hodaty': { password: 'aty2025', department: 'ATYAYIKA', displayName: 'ATYAYIKA' },
            'hodayu': { password: 'ayu2025', department: 'AYUSH', displayName: 'AYUSH' },
            'hodscr': { password: 'scr2025', department: 'SCREENING', displayName: 'SCREENING' },
            'hodoth': { password: 'oth2025', department: 'OTHER HOSPITALS', displayName: 'OTHER HOSPITALS' }
        };

        // Department codes mapping
        const deptCodes = {
            'KAYACHIKITSA': 'KC',
            'SHALYA TANTRA': 'ST',
            'SHALAKYA TANTRA': 'SKT',
            'PANCHAKARMA': 'PK',
            'PRASUTI TANTRA & STREE ROGA': 'PTSR',
            'KAUMARABHRITYA': 'KB',
            'SWASTHAVRITTA': 'SV',
            'LABORATORY': 'LAB',
            'PHARMACY': 'PHM',
            'ATYAYIKA': 'ATY',
            'AYUSH': 'AYU',
            'SCREENING': 'SCR',
            'OTHER HOSPITALS': 'OTH'
        };

        // Department training guidelines
        const departmentGuidelines = {
            'KAYACHIKITSA': 'The intern should be exposed to comprehensive internal medicine practices, diagnosis and management of various systemic disorders, Panchakarma procedures, and classical Ayurvedic treatment protocols. Emphasis should be given to practical training in patient examination, case taking, and therapeutic procedures.',
            'SHALYA TANTRA': 'The intern should receive training in surgical procedures, wound management, pre and post-operative care, and classical surgical techniques as described in Ayurvedic texts. Practical exposure to minor surgical procedures, wound dressing, and surgical instruments handling is essential.',
            'SHALAKYA TANTRA': 'The intern should be trained in ENT, Ophthalmology, and Dentistry procedures as per Ayurvedic principles. Focus should be given to examination techniques, therapeutic procedures for eye, ear, nose, throat, and oral cavity disorders.',
            'PANCHAKARMA': 'The intern should receive comprehensive training in all Panchakarma procedures including Vamana, Virechana, Basti, Nasya, and Raktamokshana. Practical training in preparation of medicines, patient selection, and post-procedural care is mandatory.',
            'PRASUTI TANTRA & STREE ROGA': 'The intern should be exposed to gynecological and obstetric care, antenatal and postnatal management, family planning methods, and treatment of gynecological disorders as per Ayurvedic principles.',
            'KAUMARABHRITYA': 'The intern should receive training in pediatric care, child development, vaccination, nutritional counseling, and management of pediatric disorders according to Ayurvedic pediatric principles.',
            'SWASTHAVRITTA': 'The intern should be trained in preventive and social medicine, health promotion, disease prevention, community health programs, nutrition, yoga, and lifestyle management. Focus should be given to public health initiatives, health education, and understanding of environmental and occupational health.',
            'LABORATORY': 'The intern should be trained in various laboratory investigations, sample collection, processing, and interpretation of results. Knowledge of modern laboratory techniques and their correlation with Ayurvedic diagnostic methods should be emphasized.',
            'PHARMACY': 'The intern should receive practical training in pharmaceutical preparations, quality control, drug standardization, and manufacturing processes of Ayurvedic medicines as per GMP guidelines.',
            'ATYAYIKA': 'The intern should be trained in emergency medical care, first aid, trauma management, and critical care procedures. Integration of Ayurvedic emergency protocols with modern emergency medicine should be emphasized.',
            'AYUSH': 'The intern should receive exposure to integrated healthcare delivery, community health programs, and interdisciplinary approach in patient care involving various AYUSH systems.',
            'SCREENING': 'The intern should be trained in patient screening procedures, triage, preliminary examination, and basic diagnostic skills. Focus should be given to history taking and initial patient assessment.',
            'OTHER HOSPITALS': 'The intern should receive exposure to healthcare delivery in different settings, gain experience in diverse clinical scenarios, and understand healthcare management in various institutional frameworks.'
        };

        // View switching functions
        function switchView(view) {
            currentView = view;
            const adminBtn = document.getElementById('adminViewBtn');
            const hodBtn = document.getElementById('hodViewBtn');
            const adminLoginSection = document.getElementById('adminLoginSection');
            const adminPanel = document.getElementById('adminPanel');
            const adminSections = document.getElementById('adminSections');
            const hodLoginSection = document.getElementById('hodLoginSection');
            const hodPanel = document.getElementById('hodPanel');

            if (view === 'admin') {
                adminBtn.classList.add('active');
                hodBtn.classList.remove('active');
                adminLoginSection.style.display = 'block';
                adminPanel.style.display = currentAdmin ? 'block' : 'none';
                adminSections.style.display = currentAdmin ? 'block' : 'none';
                hodLoginSection.style.display = 'none';
                hodPanel.style.display = 'none';
                currentHOD = null;
            } else {
                adminBtn.classList.remove('active');
                hodBtn.classList.add('active');
                adminLoginSection.style.display = 'none';
                adminPanel.style.display = 'none';
                adminSections.style.display = 'none';
                hodLoginSection.style.display = 'block';
                hodPanel.style.display = 'none';
                currentAdmin = null;
            }
        }

        // Admin login functions
        function adminLogin() {
            const username = document.getElementById('adminUsername').value.trim();
            const password = document.getElementById('adminPassword').value.trim();
            const errorDiv = document.getElementById('adminLoginError');

            if (!username || !password) {
                errorDiv.textContent = 'Please enter both username and password.';
                errorDiv.style.display = 'block';
                return;
            }

            if (adminCredentials[username] && adminCredentials[username].password === password) {
                currentAdmin = adminCredentials[username];
                document.getElementById('adminLoginSection').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                document.getElementById('adminSections').style.display = 'block';
                document.getElementById('adminRoleName').textContent = currentAdmin.role;
                errorDiv.style.display = 'none';
                
                document.getElementById('adminUsername').value = '';
                document.getElementById('adminPassword').value = '';

                renderInterns();
                updateSummaryStats();
            } else {
                errorDiv.textContent = 'Invalid username or password.';
                errorDiv.style.display = 'block';
            }
        }

        function adminLogout() {
            currentAdmin = null;
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('adminSections').style.display = 'none';
            document.getElementById('adminLoginSection').style.display = 'block';
        }

        // HOD login functions
        function hodLogin() {
            const username = document.getElementById('hodUsername').value.trim();
            const password = document.getElementById('hodPassword').value.trim();
            const errorDiv = document.getElementById('hodLoginError');

            if (!username || !password) {
                errorDiv.textContent = 'Please enter both username and password.';
                errorDiv.style.display = 'block';
                return;
            }

            if (hodCredentials[username] && hodCredentials[username].password === password) {
                currentHOD = hodCredentials[username];
                document.getElementById('hodLoginSection').style.display = 'none';
                document.getElementById('hodPanel').style.display = 'block';
                document.getElementById('hodDeptName').textContent = currentHOD.displayName;
                renderHODPostings();
                errorDiv.style.display = 'none';
                
                document.getElementById('hodUsername').value = '';
                document.getElementById('hodPassword').value = '';
            } else {
                errorDiv.textContent = 'Invalid username or password.';
                errorDiv.style.display = 'block';
            }
        }

        function hodLogout() {
            currentHOD = null;
            document.getElementById('hodPanel').style.display = 'none';
            document.getElementById('hodLoginSection').style.display = 'block';
        }

        // Continue with remaining JavaScript functions...
    </script>
</body>
</html>

                <!-- Patient Care & Communication -->
                <div style="background: white; padding: 20px; margin: 15px 0; border-radius: 8px; border: 1px solid #e1e8ed;">
                    <h4 style="color: #2c3e50; margin-bottom: 15px;">2. Patient Care & Communication</h4>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center;">
                        <label>Patient interaction and communication</label>
                        <select name="patientCommunication" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
                        </select>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center; margin-top: 10px;">
                        <label>Empathy and bedside manner</label>
                        <select name="empathy" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
                        </select>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; align-items: center; margin-top: 10px;">
                        <label>History taking abilities</label>
                        <select name="historyTaking" required>
                            <option value="">Select Rating</option>
                            <option value="5">Excellent (5)</option>
                            <option value="4">Very Good (4)</option>
                            <option value="3">Good (3)</option>
                            <option value="2">Satisfactory (2)</option>
                            <option value="1">Needs Improvement (1)</option>
